{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Document Types Registry",
  "type": "object",
  "required": ["version", "status_taxonomy", "types"],
  "properties": {
    "version": { "type": "string" },
    "generated_at": { "type": "string" },
    "status_taxonomy": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
    "types": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "key","prefix","canonical_dir","filename_pattern","profile","artifacts",
          "lint_command","render_command","score_command","ci_job_name","rubric","health_flags"
        ],
        "properties": {
          "key": { "type": "string", "pattern": "^[a-z0-9_]+$" },
          "prefix": { "type": "string" },
          "canonical_dir": { "type": "string" },
          "filename_pattern": { "type": "string" },
          "profile": { "type": "string" },
          "artifacts": {
            "type": "object",
            "required": ["document_type_spec","canonical_template","frontmatter_json_schema","ci_enforcement_policy"],
            "properties": {
              "document_type_spec": { "type": "string" },
              "canonical_template": { "type": "string" },
              "frontmatter_json_schema": { "type": "string" },
              "ci_enforcement_policy": { "type": "string" }
            }
          },
          "lint_command": { "type": "string" },
          "render_command": { "type": "string" },
          "score_command": { "type": "string" },
          "ci_job_name": { "type": "string" },
          "rubric": { "type": "string" },
          "health_flags": { "type": "string" }
        }
      }
    }
  }
}
